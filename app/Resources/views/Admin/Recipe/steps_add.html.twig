{% extends ':Admin:dashboard.html.twig' %}

{% block title %}Ajout des étapes - {{ parent() }}{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{{ asset('css/wickedpicker.css') }}"/>
    <link href="//cdn.rawgit.com/Eonasdan/bootstrap-datetimepicker/e8bddc60e73c1ec2475f827be36e1957af72e2ea/build/css/bootstrap-datetimepicker.css" rel="stylesheet">
{% endblock %}

{% block content %}

    <div class="row">
        <div class="offset-sm-1 col-sm-10">
            <div class="card-block">
                <div class="text-center">
                    <h4>Ajout des étapes pour la recette : {{ recipe.name }}</h4>
                    <hr class="mt-2 mb-2">
                </div>
                {% form_theme form '::jquery.collection.html.twig' ':Admin:step-theme.html.twig' %}


                {{ form_start(form) }}
                {{ form_label(form.steps, 'Etapes') }}
                {{ form_widget(form.steps) }}
                {{ form_errors(form.steps) }}
                {{ form_end(form) }}

            </div>
        </div>
    </div>
{% endblock %}

{% block javascript %}
    <script src="{{ asset('js/jquery.collection.js') }}"></script>
    <!-- <script src="{{ asset('js/wickedpicker.js') }}"></script> -->

    <script>

        var pickerOptions = {
            now: "00 : 00 : 00", //hh:mm 24 hour format only, defaults to current time
            twentyFour: true,  //Display 24 hour format, defaults to false
            upArrow: 'wickedpicker__controls__control-up',  //The up arrow class selector to use, for custom CSS
            downArrow: 'wickedpicker__controls__control-down', //The down arrow class selector to use, for custom CSS
            close: 'wickedpicker__close', //The close class selector to use, for custom CSS
            hoverState: 'hover-state', //The hover state class to use, for custom CSS
            title: 'Temps', //The Wickedpicker's title,
            showSeconds: true, //Whether or not to show seconds,
            timeSeparator: ' : ', // The string to put in between hours and minutes (and seconds)
            secondsInterval: 1, //Change interval for seconds, defaults to 1,
            minutesInterval: 1, //Change interval for minutes, defaults to 1
            hoursInterval: 1, //Change interval for hours, defaults to 1
            beforeShow: null, //A function to be called before the Wickedpicker is shown
            afterShow: null, //A function to be called after the Wickedpicker is closed/hidden
            show: null, //A function to be called when the Wickedpicker is shown
            clearable: true, //Make the picker's input clearable (has clickable "x")
        }
        $('.collection').collection({
            min: 0,
            init_with_n_elements: 1,
            allow_duplicate: false,
            add: '<a href="#" class="btn btn-default"><i class="fa fa-plus"></i></a>',
            after_init: function(collection, element) {
                $('select').material_select();
                /*$('.timepicker').wickedpicker();

                $(collection).find('.timepicker').each(function () {
                    console.log($(this).val());
                    if ($(this).val() == '00 : 00 : 00') {

                        $(this).val('');
                    }
                });*/



            },
            after_add: function(collection, element) {
                $('select').material_select();
                //$('.timepicker').wickedpicker(pickerOptions);


                //console.log($(element).find('.timepicker').val(''));
            }
        });
    </script>
{% endblock %}